{"ast":null,"code":"var _jsxFileName = \"/Users/luismiguelascencio/Development/labs/FINAL/react-drum-machine/src/components/StepSequencer.js\";\nimport React from \"react\";\nimport { Transport } from \"tone\";\nimport { Knob } from \"react-rotary-knob\";\nimport * as skins from \"react-rotary-knob-skin-pack\";\nimport Step from \"./Step\";\n\nclass StepSequencer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.mouseChangeDown = () => {\n      this.setState({\n        mouse: true\n      });\n      console.log(this.state.mouse);\n    };\n\n    this.mouseChangeUp = () => {\n      this.setState({\n        mouse: false\n      });\n      console.log(this.state.mouse);\n    };\n\n    this.resetHandler = () => {\n      this.index = 0;\n    };\n\n    this.clickHandler = e => {\n      // console.log(e.target.dataset.id);\n      let newVal = e.target.dataset.id;\n      this.setState({\n        [newVal]: !this.state[newVal]\n      }); // console.log(this.state);\n    };\n\n    this.stepHandler = val => {\n      console.log(Math.trunc(val));\n      this.setState({\n        val: Math.trunc(val)\n      }); // console.log(this.state.val);\n\n      this.count = Math.trunc(val) - 1;\n      let newArray = Array(Math.trunc(val)).fill(1);\n      this.setState({\n        arrayLength: newArray\n      }); // console.log(newArray);\n    };\n\n    this.checkStep = time => {\n      // console.log(\"yey\", this.state[this.index + 100], this.index + 100);\n      // console.log(this.index, this.count);\n      // this.setState({\n      //   [this.index + 16]: false\n      // });\n      // this.setState({\n      //   background: [...this.state.background, ]\n      // });\n      console.log(this.count);\n      console.log(\"index:\", this.index); // if (this.index + this.count + 101) {\n      //   this.setState({\n      //     [this.index + this.count + 101]: false\n      //   });\n      // }\n\n      this.setState({\n        100: false,\n        101: false,\n        102: false,\n        103: false,\n        104: false,\n        105: false,\n        106: false,\n        107: false,\n        108: false,\n        109: false,\n        110: false,\n        111: false,\n        112: false,\n        113: false,\n        114: false,\n        115: false\n      });\n      this.setState({\n        [this.index + 100]: !this.state[this.index + 100]\n      }); // this.setState({\n      //   [this.index + 100]: !this.state[this.index + 100]\n      // });\n\n      if (this.state[this.index] === true) {\n        // console.log(\"trig\");\n        this.props.triggerHandler();\n      }\n\n      if (this.index < this.count) {\n        this.index++;\n      } else if (this.index === this.count) {\n        this.index = 0;\n      } else {\n        this.index = this.index - this.count;\n      }\n    };\n\n    this.state = {\n      arrayLength: Array(16).fill(1),\n      val: 16,\n      /// Background:::\n      100: false,\n      101: false,\n      102: false,\n      103: false,\n      104: false,\n      105: false,\n      106: false,\n      107: false,\n      108: false,\n      109: false,\n      110: false,\n      111: false,\n      112: false,\n      113: false,\n      114: false,\n      115: false,\n      ///Clicked:::\n      0: false,\n      1: false,\n      2: false,\n      3: false,\n      4: false,\n      5: false,\n      6: false,\n      7: false,\n      8: false,\n      9: false,\n      10: false,\n      11: false,\n      12: false,\n      13: false,\n      14: false,\n      15: false,\n      mouse: false\n    };\n    Transport.scheduleRepeat(this.checkStep, \"8n\");\n    this.index = 0;\n    this.count = 15;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        flex: 1,\n        flexDirection: \"row\",\n        width: \"890px\",\n        padding: \"10px\",\n        margin: \"5px\",\n        border: \"\".concat(this.props.color)\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"knob\",\n      style: {\n        marginRight: \"10px\",\n        display: \"inline-block\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      className: \"knobText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Steps\"), React.createElement(Knob, {\n      skin: skins.s16,\n      unlockDistance: 30,\n      onChange: this.stepHandler,\n      min: 1,\n      max: 16,\n      clampMax: 180,\n      rotateDegrees: 270,\n      value: this.state.val,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    })), this.state.arrayLength.map((x, i) => {\n      return React.createElement(Step, {\n        key: i,\n        clickHandler: this.clickHandler,\n        id: i,\n        clicked: this.state[i],\n        borderColor: this.state[i + 100],\n        color: this.props.color,\n        mouse: this.state.mouse,\n        mouseChangeDown: this.mouseChangeDown,\n        mouseChangeUp: this.mouseChangeUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      });\n    })));\n  }\n\n}\n\nexport default StepSequencer;","map":{"version":3,"sources":["/Users/luismiguelascencio/Development/labs/FINAL/react-drum-machine/src/components/StepSequencer.js"],"names":["React","Transport","Knob","skins","Step","StepSequencer","Component","constructor","props","mouseChangeDown","setState","mouse","console","log","state","mouseChangeUp","resetHandler","index","clickHandler","e","newVal","target","dataset","id","stepHandler","val","Math","trunc","count","newArray","Array","fill","arrayLength","checkStep","time","triggerHandler","scheduleRepeat","render","flex","flexDirection","width","padding","margin","border","color","marginRight","display","s16","map","x","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Transport } from \"tone\";\nimport { Knob } from \"react-rotary-knob\";\nimport * as skins from \"react-rotary-knob-skin-pack\";\nimport Step from \"./Step\";\n\nclass StepSequencer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      arrayLength: Array(16).fill(1),\n      val: 16,\n      /// Background:::\n      100: false,\n      101: false,\n      102: false,\n      103: false,\n      104: false,\n      105: false,\n      106: false,\n      107: false,\n      108: false,\n      109: false,\n      110: false,\n      111: false,\n      112: false,\n      113: false,\n      114: false,\n      115: false,\n\n      ///Clicked:::\n      0: false,\n      1: false,\n      2: false,\n      3: false,\n      4: false,\n      5: false,\n      6: false,\n      7: false,\n      8: false,\n      9: false,\n      10: false,\n      11: false,\n      12: false,\n      13: false,\n      14: false,\n      15: false,\n      mouse: false\n    };\n\n    Transport.scheduleRepeat(this.checkStep, \"8n\");\n    this.index = 0;\n    this.count = 15;\n  }\n  mouseChangeDown = () => {\n    this.setState({\n      mouse: true\n    });\n    console.log(this.state.mouse);\n  };\n  mouseChangeUp = () => {\n    this.setState({\n      mouse: false\n    });\n    console.log(this.state.mouse);\n  };\n  resetHandler = () => {\n    this.index = 0;\n  };\n  ///Steps changes:::\n  clickHandler = e => {\n    // console.log(e.target.dataset.id);\n    let newVal = e.target.dataset.id;\n    this.setState({\n      [newVal]: !this.state[newVal]\n    });\n\n    // console.log(this.state);\n  };\n\n  stepHandler = val => {\n    console.log(Math.trunc(val));\n    this.setState({ val: Math.trunc(val) });\n    // console.log(this.state.val);\n    this.count = Math.trunc(val) - 1;\n    let newArray = Array(Math.trunc(val)).fill(1);\n    this.setState({\n      arrayLength: newArray\n    });\n    // console.log(newArray);\n  };\n\n  checkStep = time => {\n    // console.log(\"yey\", this.state[this.index + 100], this.index + 100);\n    // console.log(this.index, this.count);\n    // this.setState({\n    //   [this.index + 16]: false\n    // });\n\n    // this.setState({\n    //   background: [...this.state.background, ]\n    // });\n    console.log(this.count);\n    console.log(\"index:\", this.index);\n    // if (this.index + this.count + 101) {\n    //   this.setState({\n    //     [this.index + this.count + 101]: false\n    //   });\n    // }\n    this.setState({\n      100: false,\n      101: false,\n      102: false,\n      103: false,\n      104: false,\n      105: false,\n      106: false,\n      107: false,\n      108: false,\n      109: false,\n      110: false,\n      111: false,\n      112: false,\n      113: false,\n      114: false,\n      115: false\n    });\n    this.setState({\n      [this.index + 100]: !this.state[this.index + 100]\n    });\n    // this.setState({\n    //   [this.index + 100]: !this.state[this.index + 100]\n    // });\n\n    if (this.state[this.index] === true) {\n      // console.log(\"trig\");\n      this.props.triggerHandler();\n    }\n\n    if (this.index < this.count) {\n      this.index++;\n    } else if (this.index === this.count) {\n      this.index = 0;\n    } else {\n      this.index = this.index - this.count;\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        {/* <button onClick={this.resetHandler} type=\"button\">\n          Reset\n        </button> */}\n        <div\n          style={{\n            flex: 1,\n            flexDirection: \"row\",\n            width: \"890px\",\n            padding: \"10px\",\n            margin: \"5px\",\n            border: `${this.props.color}`\n          }}\n        >\n          <div\n            className=\"knob\"\n            style={{\n              marginRight: \"10px\",\n              display: \"inline-block\"\n            }}\n          >\n            <small className=\"knobText\">Steps</small>\n            <Knob\n              skin={skins.s16}\n              unlockDistance={30}\n              onChange={this.stepHandler}\n              min={1}\n              max={16}\n              clampMax={180}\n              rotateDegrees={270}\n              value={this.state.val}\n            />\n          </div>\n          {this.state.arrayLength.map((x, i) => {\n            return (\n              <Step\n                key={i}\n                clickHandler={this.clickHandler}\n                id={i}\n                clicked={this.state[i]}\n                borderColor={this.state[i + 100]}\n                color={this.props.color}\n                mouse={this.state.mouse}\n                mouseChangeDown={this.mouseChangeDown}\n                mouseChangeUp={this.mouseChangeUp}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default StepSequencer;\n"]},"metadata":{},"sourceType":"module"}